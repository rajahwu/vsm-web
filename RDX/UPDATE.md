This checklist outlines the structural changes to your database schema and the repository layout as we transition the **VSM Web** from hardcoded data to a dynamic, package-driven architecture.

---

## üóÑÔ∏è Database Schema Changes (Supabase)

These updates ensure your database can handle the specific metadata required for **Genesis Primitives** and **Optional Telemetry**.

### **Table: `training_blocks**`

* **Added `block_code` (VARCHAR):** A unique, human-readable string (e.g., `GENESIS_PRIMITIVE`) to use as a stable identifier for seed scripts and hardcoded logic.
* **Added `theme` (TEXT):** For block-level descriptions or aesthetic directions.
* **Added Asset Columns (Optional):** `icon_url` and `theme_color_hex` to drive the Radiant Seven UI colors.

### **Table: `training_cards**`

* **Added `metadata` (JSONB):** Crucial for storing Genesis-specific data like the `symbol` (‚Ä¢, ‚ñ≠, ‚óá), `category`, and the original `requirement_id`.
* **Added `title` (VARCHAR):** Extracted from the `GenesisRequirement.title` for easier indexing.
* **Foreign Key Constraint:** Ensure `block_id` cascades on delete to allow for clean re-seeding of missions.

### **Table: `user_training_sessions` (Telemetry)**

* **Added `rep_count` (INT, Nullable):** To track physical repetitions of skills like "The Palm."
* **Added `intensity_score` (INT, Nullable):** A 1-10 subjective scale for the training effort.
* **Added `raw_telemetry` (JSONB, Nullable):** A catch-all for experimental data points (e.g., time per rep, focus ratings).

---

## üìÇ Repository & Codebase Changes

These changes reflect the shift to a monorepo-style package architecture and dynamic data fetching.

### **1. Package Exports (`/packages/ui` or similar)**

* **New Type Definition:** `GenesisRequirement` exported to standardize data across the web app and the seed scripts.
* **Mission Registry Move:** `GENESIS_REQUIREMENTS` is now the "source of truth" in the package, used to populate the database via the sync script.

### **2. Script Additions (`/apps/vsm-school-web/scripts`)**

* **`sync-genesis.ts`:** New script to automate the flow: **Package Data ‚Üí Database Rows**.
* Groups requirements by category.
* Upserts blocks.
* Syncs card order and metadata.



### **3. Data Fetching Refactor (`/apps/vsm-school-web/src`)**

* **`hooks/useTrainingData.ts`:** Updated to use Supabase client queries (`from('training_blocks').select('*')`) instead of importing `mission-registry.ts`.
* **`app/training/page.tsx`:** * Removed static imports of missions.
* Implemented state-loading for `currentBlock` and `currentCards` from the DB.
* Updated Card rendering logic to pull symbols from the `card.metadata` JSONB blob.



### **4. Asset Pipeline**

* **Pathing Changes:** Moving from hardcoded CSS classes to dynamic styles driven by `block.theme_color_hex`.
* **SVG Integration:** Logic prepared to map `metadata.symbol` to high-fidelity SVGs generated by the Genesis Tool.

---

### **Next Step for You**

After you run the sync script, would you like me to help you write the **SQL RLS (Row Level Security) policies**?

This will ensure that while anyone can *read* the Training Cards, only the authenticated user can *write* their own `user_training_sessions`.